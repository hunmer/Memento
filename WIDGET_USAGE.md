# Memento æ¡Œé¢å°ç»„ä»¶ä½¿ç”¨æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•ä½¿ç”¨ Memento çš„ä¸¤ä¸ª Android æ¡Œé¢å°ç»„ä»¶åŠŸèƒ½ã€‚

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

Memento ç°åœ¨æ”¯æŒä¸¤ä¸ªæ¡Œé¢å°ç»„ä»¶ï¼š

1. **é¢‘é“æ¶ˆæ¯å¿«é€Ÿå‘é€å°ç»„ä»¶** - å¿«é€Ÿå‘é€æ¶ˆæ¯åˆ°å¸¸ç”¨é¢‘é“
2. **AI è¯­éŸ³åŠ©æ‰‹å°ç»„ä»¶** - å¿«é€Ÿå‘é€è¯­éŸ³æ¶ˆæ¯åˆ° AI å¯¹è¯

## ğŸ“¦ åŠŸèƒ½ç‰¹ç‚¹

### é¢‘é“æ¶ˆæ¯å¿«é€Ÿå‘é€å°ç»„ä»¶

- âœ… æ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨çš„ 3 ä¸ªé¢‘é“
- âœ… æ˜¾ç¤ºæ¯ä¸ªé¢‘é“çš„æœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆ
- âœ… ç‚¹å‡»é¢‘é“ç›´æ¥è·³è½¬åˆ°è¯¥é¢‘é“çš„èŠå¤©ç•Œé¢
- âœ… ç‚¹å‡»"é€‰æ‹©é¢‘é“"æŒ‰é’®å¯ä»¥æŸ¥çœ‹æ‰€æœ‰é¢‘é“åˆ—è¡¨
- âœ… è‡ªåŠ¨æ›´æ–°é¢‘é“æ•°æ®ï¼ˆæ¯ 30 åˆ†é’Ÿæˆ–åº”ç”¨ä¸»åŠ¨è§¦å‘ï¼‰

### AI è¯­éŸ³åŠ©æ‰‹å°ç»„ä»¶

- âœ… æ˜¾ç¤ºæœ€è¿‘ä½¿ç”¨çš„ 3 ä¸ª AI å¯¹è¯
- âœ… æ˜¾ç¤ºæ¯ä¸ªå¯¹è¯çš„æœ€åä¸€æ¡æ¶ˆæ¯é¢„è§ˆ
- âœ… ç‚¹å‡»å¯¹è¯è‡ªåŠ¨æ‰“å¼€è¯­éŸ³è¾“å…¥å¯¹è¯æ¡†
- âœ… ç‚¹å‡»"é€‰æ‹©å¯¹è¯"æŒ‰é’®å¯ä»¥æŸ¥çœ‹æ‰€æœ‰å¯¹è¯åˆ—è¡¨
- âœ… è‡ªåŠ¨æ›´æ–°å¯¹è¯æ•°æ®ï¼ˆæ¯ 30 åˆ†é’Ÿæˆ–åº”ç”¨ä¸»åŠ¨è§¦å‘ï¼‰

## ğŸš€ å¦‚ä½•æ·»åŠ å°ç»„ä»¶

### æ–¹æ³• 1ï¼šé•¿æŒ‰æ¡Œé¢

1. é•¿æŒ‰ Android æ¡Œé¢ç©ºç™½å¤„
2. é€‰æ‹©"å°ç»„ä»¶"æˆ–"Widgets"
3. æ‰¾åˆ° **Memento** åº”ç”¨
4. é€‰æ‹©ä»¥ä¸‹å°ç»„ä»¶ä¹‹ä¸€ï¼š
   - **å¿«é€Ÿå‘é€** - é¢‘é“æ¶ˆæ¯å°ç»„ä»¶
   - **AI è¯­éŸ³åŠ©æ‰‹** - è¯­éŸ³å°ç»„ä»¶
5. é•¿æŒ‰å¹¶æ‹–åŠ¨åˆ°æ¡Œé¢åˆé€‚ä½ç½®

### æ–¹æ³• 2ï¼šé€šè¿‡å°ç»„ä»¶èœå•

1. æ‰“å¼€åº”ç”¨æŠ½å±‰
2. é•¿æŒ‰ Memento åº”ç”¨å›¾æ ‡
3. é€‰æ‹©"å°ç»„ä»¶"
4. æ‹–åŠ¨æƒ³è¦çš„å°ç»„ä»¶åˆ°æ¡Œé¢

## ğŸ“ å°ç»„ä»¶å°ºå¯¸

ä¸¤ä¸ªå°ç»„ä»¶éƒ½æ”¯æŒä»¥ä¸‹å°ºå¯¸ï¼š

- **æœ€å°å°ºå¯¸**: 2x2 (180dp x 180dp)
- **æ¨èå°ºå¯¸**: 2x3 æˆ– 3x2
- **æ”¯æŒè°ƒæ•´**: å¯æ¨ªå‘å’Œçºµå‘è°ƒæ•´å¤§å°

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### é¢‘é“æ¶ˆæ¯å°ç»„ä»¶

**åœºæ™¯ 1ï¼šå¿«é€Ÿå‘é€æ¶ˆæ¯åˆ°å¸¸ç”¨é¢‘é“**
1. ç‚¹å‡»å°ç»„ä»¶ä¸Šçš„é¢‘é“é¡¹
2. è‡ªåŠ¨è·³è½¬åˆ°è¯¥é¢‘é“çš„èŠå¤©ç•Œé¢
3. è¾“å…¥æ¶ˆæ¯å¹¶å‘é€

**åœºæ™¯ 2ï¼šé€‰æ‹©å…¶ä»–é¢‘é“**
1. ç‚¹å‡»"+ é€‰æ‹©é¢‘é“"æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„é¢‘é“åˆ—è¡¨ä¸­é€‰æ‹©ç›®æ ‡é¢‘é“
3. è·³è½¬åˆ°è¯¥é¢‘é“çš„èŠå¤©ç•Œé¢

**æ•°æ®æ›´æ–°æ—¶æœº**ï¼š
- åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨æ›´æ–°
- å‘é€æ¶ˆæ¯åè‡ªåŠ¨æ›´æ–°
- ç³»ç»Ÿå®šæœŸæ›´æ–°ï¼ˆçº¦ 30 åˆ†é’Ÿï¼‰

### AI è¯­éŸ³åŠ©æ‰‹å°ç»„ä»¶

**åœºæ™¯ 1ï¼šå¿«é€Ÿå‘é€è¯­éŸ³åˆ°æœ€è¿‘çš„å¯¹è¯**
1. ç‚¹å‡»å°ç»„ä»¶ä¸Šçš„å¯¹è¯é¡¹
2. è‡ªåŠ¨æ‰“å¼€è¯­éŸ³è¾“å…¥å¯¹è¯æ¡†
3. æŒ‰ä½å½•éŸ³æŒ‰é’®è¯´è¯
4. æ¾å¼€æŒ‰é’®è‡ªåŠ¨è¯†åˆ«å¹¶å‘é€

**åœºæ™¯ 2ï¼šé€‰æ‹©å…¶ä»–å¯¹è¯**
1. ç‚¹å‡»"+ é€‰æ‹©å¯¹è¯"æŒ‰é’®
2. åœ¨å¼¹å‡ºçš„å¯¹è¯åˆ—è¡¨ä¸­é€‰æ‹©ç›®æ ‡å¯¹è¯
3. è‡ªåŠ¨æ‰“å¼€è¯­éŸ³è¾“å…¥å¯¹è¯æ¡†

**è¯­éŸ³è¯†åˆ«**ï¼š
- ä½¿ç”¨è…¾è®¯äº‘ ASR æœåŠ¡
- éœ€è¦åœ¨åº”ç”¨è®¾ç½®ä¸­é…ç½® API å¯†é’¥
- æ”¯æŒå®æ—¶æµå¼è¯†åˆ«

## âš™ï¸ é…ç½®è¦æ±‚

### å¿…éœ€æƒé™

ä»¥ä¸‹æƒé™å·²åœ¨å®‰è£…æ—¶è‡ªåŠ¨æˆäºˆï¼š
- âœ… ç½‘ç»œè®¿é—® (INTERNET)
- âœ… å½•éŸ³æƒé™ (RECORD_AUDIO) - ä»…è¯­éŸ³å°ç»„ä»¶éœ€è¦

### ç³»ç»Ÿè¦æ±‚

- Android 5.0 (API 21) æˆ–æ›´é«˜ç‰ˆæœ¬
- æ¨è Android 8.0 ä»¥ä¸Šä»¥è·å¾—æœ€ä½³ä½“éªŒ

### è¯­éŸ³è¯†åˆ«é…ç½®

å¦‚éœ€ä½¿ç”¨ AI è¯­éŸ³å°ç»„ä»¶ï¼Œè¯·å…ˆåœ¨åº”ç”¨ä¸­é…ç½®ï¼š

1. æ‰“å¼€ Memento åº”ç”¨
2. è¿›å…¥ **AI å¯¹è¯** æ’ä»¶
3. ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡
4. é…ç½®è…¾è®¯äº‘ ASRï¼š
   - App ID
   - Secret ID
   - Secret Key

## ğŸ”§ æ•…éšœæ’é™¤

### å°ç»„ä»¶ä¸æ˜¾ç¤ºæ•°æ®

**åŸå› **ï¼šåº”ç”¨å°šæœªåˆå§‹åŒ–æ•°æ®
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰“å¼€ Memento åº”ç”¨
2. è¿›å…¥å¯¹åº”çš„æ’ä»¶ï¼ˆChat æˆ– Agent Chatï¼‰
3. ç­‰å¾…æ•°æ®åŠ è½½å®Œæˆ
4. è¿”å›æ¡Œé¢æŸ¥çœ‹å°ç»„ä»¶

### å°ç»„ä»¶ç‚¹å‡»æ²¡æœ‰ååº”

**åŸå› **ï¼šDeepLink æœªæ­£ç¡®é…ç½®
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®ä¿åº”ç”¨å·²æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬
2. é‡æ–°å®‰è£…åº”ç”¨
3. é‡æ–°æ·»åŠ å°ç»„ä»¶

### å°ç»„ä»¶æ•°æ®ä¸æ›´æ–°

**åŸå› **ï¼šç³»ç»Ÿåå°é™åˆ¶
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ‰“å¼€åº”ç”¨è§¦å‘æ‰‹åŠ¨æ›´æ–°
2. åœ¨ç³»ç»Ÿè®¾ç½®ä¸­å…è®¸åº”ç”¨åå°è¿è¡Œ
3. å…³é—­çœç”µæ¨¡å¼

### è¯­éŸ³è¯†åˆ«å¤±è´¥

**åŸå›  1**ï¼šæœªé…ç½® API å¯†é’¥
**è§£å†³æ–¹æ¡ˆ**ï¼šå‚è€ƒ"é…ç½®è¦æ±‚ > è¯­éŸ³è¯†åˆ«é…ç½®"

**åŸå›  2**ï¼šç½‘ç»œé—®é¢˜
**è§£å†³æ–¹æ¡ˆ**ï¼šæ£€æŸ¥ç½‘ç»œè¿æ¥

**åŸå›  3**ï¼šæƒé™æœªæˆäºˆ
**è§£å†³æ–¹æ¡ˆ**ï¼šåœ¨ç³»ç»Ÿè®¾ç½®ä¸­æˆäºˆå½•éŸ³æƒé™

## ğŸ”„ æ›´æ–°æœºåˆ¶

### è‡ªåŠ¨æ›´æ–°

å°ç»„ä»¶ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨æ›´æ–°ï¼š
- åº”ç”¨å¯åŠ¨æ—¶
- æ’ä»¶æ•°æ®å˜åŒ–æ—¶ï¼ˆå‘é€æ¶ˆæ¯ã€åˆ›å»ºé¢‘é“ç­‰ï¼‰
- ç³»ç»Ÿå®šæœŸæ›´æ–°ï¼ˆçº¦ 30 åˆ†é’Ÿä¸€æ¬¡ï¼‰

### æ‰‹åŠ¨æ›´æ–°

å¦‚éœ€ç«‹å³æ›´æ–°å°ç»„ä»¶ï¼š
1. æ‰“å¼€ Memento åº”ç”¨
2. è¿›å…¥å¯¹åº”æ’ä»¶
3. æ‰§è¡Œä»»ä½•æ“ä½œï¼ˆå¦‚å‘é€æ¶ˆæ¯ï¼‰
4. è¿”å›æ¡Œé¢æŸ¥çœ‹æ›´æ–°

## ğŸ“± æŠ€æœ¯å®ç°

### æŠ€æœ¯æ ˆ

- **Flutter ä¾§**: home_widget æ’ä»¶
- **Android ä¾§**: AppWidgetProvider + RemoteViews
- **æ•°æ®åŒæ­¥**: SharedPreferences
- **DeepLink**: memento://widget/

### æ•°æ®ç»“æ„

**é¢‘é“æ•°æ® (channels_json)**:
```json
[
  {
    "id": "channel-uuid",
    "name": "å·¥ä½œé¢‘é“",
    "iconCodePoint": 58694,
    "colorValue": -12345678,
    "lastMessage": "æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹",
    "unreadCount": 0
  }
]
```

**å¯¹è¯æ•°æ® (conversations_json)**:
```json
[
  {
    "id": "conversation-uuid",
    "title": "AI åŠ©æ‰‹",
    "lastMessage": "æœ€åä¸€æ¡æ¶ˆæ¯å†…å®¹",
    "lastMessageTime": "2025-11-20T10:30:00.000Z",
    "messageCount": 42,
    "groupName": "å·¥ä½œ"
  }
]
```

### DeepLink æ ¼å¼

- é¢‘é“å¿«é€Ÿå‘é€: `memento://widget/quick_send?channelId={id}`
- AI è¯­éŸ³åŠ©æ‰‹: `memento://widget/voice_quick?conversationId={id}`
- åˆ—è¡¨é€‰æ‹©: `memento://widget/quick_send` æˆ– `memento://widget/voice_quick` (æ— å‚æ•°)

## ğŸ¨ è‡ªå®šä¹‰

### ä¿®æ”¹å°ç»„ä»¶æ ·å¼

å°ç»„ä»¶æ ·å¼æ–‡ä»¶ä½ç½®ï¼š
- å¸ƒå±€æ–‡ä»¶: `android/app/src/main/res/layout/widget_*.xml`
- èƒŒæ™¯: `android/app/src/main/res/drawable/widget_background*.xml`

### ä¿®æ”¹æ›´æ–°é¢‘ç‡

ç¼–è¾‘ `android/app/src/main/res/xml/widget_*_info.xml`ï¼š
```xml
<appwidget-provider
    android:updatePeriodMillis="1800000"  <!-- 30åˆ†é’Ÿ -->
    ... />
```

**æ³¨æ„**ï¼šAndroid ç³»ç»Ÿé™åˆ¶æœ€å°æ›´æ–°é¢‘ç‡ä¸º 30 åˆ†é’Ÿï¼ˆ1800000 æ¯«ç§’ï¼‰ã€‚

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [Flutter home_widget æ’ä»¶æ–‡æ¡£](https://pub.dev/packages/home_widget)
- [Android App Widgets å®˜æ–¹æ–‡æ¡£](https://developer.android.com/guide/topics/appwidgets)
- [Memento é¡¹ç›®ä¸»æ–‡æ¡£](./CLAUDE.md)

## ğŸ› å·²çŸ¥é—®é¢˜

1. **å°ç»„ä»¶æ›´æ–°å»¶è¿Ÿ**: ç”±äº Android ç³»ç»Ÿé™åˆ¶ï¼Œå°ç»„ä»¶æ›´æ–°å¯èƒ½æœ‰å»¶è¿Ÿ
2. **å›¾æ ‡é¢œè‰²**: é¢‘é“å›¾æ ‡é¢œè‰²æš‚ä¸æ”¯æŒåŠ¨æ€è®¾ç½®
3. **è¯­éŸ³è¯†åˆ«éœ€è¦ç½‘ç»œ**: ç¦»çº¿æ¨¡å¼ä¸‹è¯­éŸ³è¯†åˆ«ä¸å¯ç”¨

## ğŸ”® æœªæ¥è®¡åˆ’

- [ ] æ”¯æŒ iOS æ¡Œé¢å°ç»„ä»¶
- [ ] æ”¯æŒæ›´å¤šå°ºå¯¸å’Œå¸ƒå±€
- [ ] æ”¯æŒä¸»é¢˜åˆ‡æ¢ï¼ˆæ·±è‰²/æµ…è‰²æ¨¡å¼ï¼‰
- [ ] æ”¯æŒå¿«é€Ÿå›å¤åŠŸèƒ½
- [ ] æ”¯æŒè¯­éŸ³æ’­æ”¾å†å²æ¶ˆæ¯

## ğŸ“ åé¦ˆä¸æ”¯æŒ

é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Ÿ

- GitHub Issues: https://github.com/hunmer/Memento/issues
- åº”ç”¨å†…åé¦ˆ: è®¾ç½® > å…³äº > åé¦ˆ

---

**æœ€åæ›´æ–°**: 2025-11-20
**ç‰ˆæœ¬**: 1.1.8+
