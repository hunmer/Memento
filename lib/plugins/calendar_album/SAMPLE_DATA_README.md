# 日历相册插件 - 示例数据实现说明

## 概述

本实现为日历相册插件添加了示例数据功能，当插件的 JSON 数据文件不存在时，会自动加载并显示预设的示例日记条目。

## 文件结构

### 1. `sample_data.dart` - 示例数据文件
**位置**: `lib/plugins/calendar_album/sample_data.dart`

**功能**: 包含预设的示例日记条目数据

**主要方法**:
- `getSampleCalendarEntries()`: 获取示例日记条目列表
- `getSampleCalendarEntriesGrouped()`: 获取按日期分组的示例数据

**示例数据内容**:
- 6 条不同日期的日记条目
- 包含标题、内容、标签、位置、心情、天气等信息
- 日期使用当前时间（DateTime.now()）动态计算，确保始终显示"近期"的数据

### 2. `controllers/calendar_controller.dart` - 数据加载控制
**修改内容**:
- 添加 `sample_data.dart` 导入
- 修改 `_loadEntries()` 方法：检查数据是否为空，如果为空则加载示例数据
- 新增 `_loadSampleData()` 方法：加载并保存示例数据

**核心逻辑**:
```dart
Future<void> _loadEntries() async {
  final data = await _storage.readSafeJson(_storageKey);

  // 检查是否有数据，如果没有则加载示例数据
  if (data.isEmpty) {
    await _loadSampleData();
    return;
  }

  // 加载现有数据...
}
```

### 3. `controllers/tag_controller.dart` - 标签管理
**修改内容**:
- 在 `initialize()` 方法中添加"心情"标签组
- 修改 `_loadTagGroups()` 方法：如果文件为空，自动保存默认标签组

**默认标签组**:
- 最近使用（动态更新）
- 地点：家、工作、旅行
- 活动：生日、聚会、会议
- 心情：开心、平静、兴奋、思考

## 示例数据详情

### 日记条目示例

1. **美好的一天开始啦** (今天)
   - 标签：生活、心情
   - 位置：家
   - 心情：😊
   - 天气：晴天

2. **工作总结** (昨天)
   - 标签：工作、项目、开发
   - 位置：公司
   - 心情：💪
   - 天气：多云

3. **周末时光** (3天前)
   - 标签：休闲、朋友、运动
   - 位置：中央公园
   - 心情：🥳
   - 天气：晴天

4. **学习新技能** (5天前)
   - 标签：学习、Flutter、开发
   - 位置：家
   - 心情：📚
   - 天气：晴天

5. **雨天感悟** (7天前)
   - 标签：感悟、思考
   - 位置：家
   - 心情：🤔
   - 天气：雨天

6. **生日聚会** (10天前)
   - 标签：聚会、生日、友谊
   - 位置：餐厅
   - 心情：🎉
   - 天气：多云

### 内容特性

- **Markdown 格式**: 支持标题、列表、代码块、引用等
- **多场景**: 涵盖工作、生活、学习、休闲等多种场景
- **时间动态**: 所有日期基于 `DateTime.now()` 计算，确保始终显示"近期"的数据
- **完整信息**: 包含标签、位置、心情、天气等所有字段

## 工作流程

### 首次启动插件

1. 用户进入日历相册插件
2. `CalendarController` 构造函数调用 `_loadEntries()`
3. `_loadEntries()` 检查存储中的数据
4. 如果数据为空，调用 `_loadSampleData()`
5. `_loadSampleData()` 加载示例数据并保存到存储
6. UI 显示示例数据

### 后续启动

1. `CalendarController` 加载存储中的实际数据
2. 示例数据已被实际数据替换
3. 用户看到的是自己的数据

## 注意事项

1. **自动保存**: 示例数据一旦加载到控制器，就会自动保存到存储中
2. **覆盖机制**: 如果用户有实际数据，示例数据不会被加载
3. **动态日期**: 示例数据的日期是动态计算的，总是显示"近期"的数据
4. **完整性**: 示例数据包含完整的字段信息，确保用户能看到所有功能

## 参考其他插件

本实现参考了以下插件的示例数据模式：
- `chat` - 聊天插件
- `diary` - 日记插件
- `nodes` - 节点插件
- `openai` - AI助手插件

这些插件都在控制器中检查数据是否存在，并在数据为空时加载示例数据。
