{
  "getAccounts": {
    "title": "获取所有账户",
    "description": "获取所有账户的列表（不含账单数据）",
    "parameters": [],
    "returns": {
      "type": "Array",
      "description": "账户列表，每个元素包含 id、title、totalAmount 等字段"
    },
    "examples": [
      {
        "title": "获取所有账户",
        "code": "const accounts = await Memento.plugins.bill.getAccounts({});\nsetResult(accounts, null, 2);"
      }
    ],
    "notes": "返回的账户对象不包含 bills 字段，如需获取账单请使用 getBills",
    "enabled": true
  },
  "createAccount": {
    "title": "创建账户",
    "description": "创建一个新的账户",
    "parameters": [
      {"name": "title", "type": "string", "required": true, "description": "账户名称"},
      {"name": "id", "type": "string", "required": false, "description": "账户ID（不传则自动生成 UUID）"},
      {"name": "iconCodePoint", "type": "number", "required": false, "description": "图标代码点（MaterialIcons）"},
      {"name": "backgroundColor", "type": "number", "required": false, "description": "背景颜色值（Color.value）"}
    ],
    "returns": {
      "type": "Object",
      "description": "新创建的账户对象"
    },
    "examples": [
      {
        "title": "创建简单账户（自动生成ID）",
        "code": "const account = await Memento.plugins.bill.createAccount({title: '现金账户'});\nsetResult(`账户已创建: ${account.title}, ID: ${account.id}`);"
      },
      {
        "title": "创建指定ID的账户（方便调试）",
        "code": "const account = await Memento.plugins.bill.createAccount({id: 'acc123', title: '测试账户'});\nsetResult(`账户已创建: ${account.id}`);"
      },
      {
        "title": "创建带图标和颜色的账户",
        "code": "const account = await Memento.plugins.bill.createAccount({id: 'acc456', title: '信用卡', iconCodePoint: 58837, backgroundColor: 4280391411});\nsetResult(`账户ID: ${account.id}`);"
      }
    ],
    "notes": "不提供图标和颜色时使用默认值（account_balance_wallet 图标，绿色背景）；不提供 id 则自动生成 UUID",
    "enabled": true
  },
  "updateAccount": {
    "title": "更新账户",
    "description": "更新账户的名称、图标或背景颜色",
    "parameters": [
      {"name": "accountId", "type": "string", "required": true, "description": "账户ID"},
      {"name": "title", "type": "string", "required": false, "description": "新账户名称"},
      {"name": "iconCodePoint", "type": "number", "required": false, "description": "新图标代码点"},
      {"name": "backgroundColor", "type": "number", "required": false, "description": "新背景颜色值"}
    ],
    "returns": {
      "type": "Object",
      "description": "更新后的账户对象"
    },
    "examples": [
      {
        "title": "更新账户名称",
        "code": "const updated = await Memento.plugins.bill.updateAccount({accountId: 'acc123', title: '支付宝账户'});\nsetResult(`账户已更新: ${updated.title}`);"
      }
    ],
    "notes": "仅更新提供的字段，未提供的字段保持不变",
    "enabled": true
  },
  "deleteAccount": {
    "title": "删除账户",
    "description": "删除指定的账户（包括其中的所有账单）",
    "parameters": [
      {"name": "accountId", "type": "string", "required": true, "description": "账户ID"}
    ],
    "returns": {
      "type": "boolean",
      "description": "删除成功返回 true"
    },
    "examples": [
      {
        "title": "删除账户",
        "code": "const result = await Memento.plugins.bill.deleteAccount({accountId: 'acc123'});\nsetResult(result.success ? '删除成功' : (result.error || '删除失败'));"
      }
    ],
    "notes": "删除操作不可逆，会同时删除该账户下的所有账单",
    "enabled": true
  },
  "getBills": {
    "title": "获取账单列表",
    "description": "获取账单列表，支持按账户和日期范围筛选",
    "parameters": [
      {"name": "accountId", "type": "string", "required": false, "description": "账户ID（不传则返回所有账户的账单）"},
      {"name": "startDate", "type": "string", "required": false, "description": "开始日期（格式：YYYY-MM-DD）"},
      {"name": "endDate", "type": "string", "required": false, "description": "结束日期（格式：YYYY-MM-DD）"}
    ],
    "returns": {
      "type": "Array",
      "description": "账单列表，每条记录包含 id、title、amount、category、date 等字段"
    },
    "examples": [
      {
        "title": "获取所有账单",
        "code": "const bills = await Memento.plugins.bill.getBills({});\nsetResult(`共有 ${bills.length} 条账单`);"
      },
      {
        "title": "获取指定账户的账单",
        "code": "const bills = await Memento.plugins.bill.getBills({accountId: 'acc123'});\nsetResult(JSON.stringify(bills, null, 2));"
      },
      {
        "title": "获取本月账单",
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst year = timeInfo.year;\nconst month = String(timeInfo.month).padStart(2, '0');\nconst lastDay = new Date(year, timeInfo.month, 0).getDate();\nconst startDate = `${year}-${month}-01`;\nconst endDate = `${year}-${month}-${String(lastDay).padStart(2, '0')}`;\nconst bills = await Memento.plugins.bill.getBills({startDate, endDate});\nsetResult(`本月共 ${bills.length} 条账单`);"
      }
    ],
    "notes": "金额字段：正数表示收入，负数表示支出",
    "enabled": true
  },
  "createBill": {
    "title": "创建账单",
    "description": "在指定账户中创建新账单",
    "parameters": [
      {"name": "accountId", "type": "string", "required": true, "description": "账户ID"},
      {"name": "amount", "type": "number", "required": true, "description": "金额（正数=收入，负数=支出）"},
      {"name": "category", "type": "string", "required": true, "description": "分类（如：工资、餐饮、交通）"},
      {"name": "title", "type": "string", "required": true, "description": "账单标题"},
      {"name": "id", "type": "string", "required": false, "description": "账单ID(可选,不提供则自动生成)"},
      {"name": "date", "type": "string", "required": false, "description": "日期（格式：YYYY-MM-DD，默认今天）"},
      {"name": "note", "type": "string", "required": false, "description": "备注"},
      {"name": "tag", "type": "string", "required": false, "description": "标签"}
    ],
    "returns": {
      "type": "Object",
      "description": "新创建的账单对象"
    },
    "examples": [
      {
        "title": "创建收入账单（指定账户ID）",
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst today = `${timeInfo.year}-${String(timeInfo.month).padStart(2, '0')}-${String(timeInfo.day).padStart(2, '0')}`;\nconst bill = await Memento.plugins.bill.createBill({accountId: 'acc123', amount: 5000, category: '工资', title: '月度工资', date: today});\nsetResult(`账单已创建: ${bill.id}`);"
      },
      {
        "title": "创建支出账单（指定账户ID）",
        "code": "const bill = await Memento.plugins.bill.createBill({accountId: 'acc123', amount: -120, category: '餐饮', title: '午餐', note: '公司食堂'});\nsetResult('已记录午餐支出 120元');"
      },
      {
        "title": "使用自定义ID创建账单",
        "code": "const bill = await Memento.plugins.bill.createBill({\n  accountId: 'acc123',\n  amount: -299,\n  category: '购物',\n  title: '购买书籍',\n  id: 'bill123',\n  date: '2025-01-15',\n  note: '技术书籍《代码大全》'\n});\nsetResult(`账单已创建，自定义ID: ${bill.id}`);"
      },
      {
        "title": "自动使用首个账户创建账单",
        "code": "const accounts = await Memento.plugins.bill.getAccounts({});\nif (accounts.length === 0) {\n  setResult('错误：没有可用账户，请先创建账户');\n} else {\n  const firstAccountId = accounts[0].id;\n  const bill = await Memento.plugins.bill.createBill({accountId: firstAccountId, amount: -88, category: '交通', title: '地铁费'});\n  setResult(`已在账户 ${accounts[0].title} 中创建账单`);\n}"
      }
    ],
    "notes": "必需参数: accountId(账户ID)、amount(金额)、category(分类)、title(账单标题);可选参数: id(自定义ID)、date(日期)、note(备注)、tag(标签);如果不提供id会自动生成UUID;ID不能与现有账单重复;金额为正数记录收入，负数记录支出;不提供日期时使用当天日期",
    "enabled": true
  },
  "updateBill": {
    "title": "更新账单",
    "description": "更新指定账单的信息",
    "parameters": [
      {"name": "billId", "type": "string", "required": true, "description": "账单ID"},
      {"name": "accountId", "type": "string", "required": true, "description": "账户ID"},
      {"name": "amount", "type": "number", "required": false, "description": "新金额"},
      {"name": "category", "type": "string", "required": false, "description": "新分类"},
      {"name": "title", "type": "string", "required": false, "description": "新标题"},
      {"name": "date", "type": "string", "required": false, "description": "新日期（格式：YYYY-MM-DD）"},
      {"name": "note", "type": "string", "required": false, "description": "新备注"},
      {"name": "tag", "type": "string", "required": false, "description": "新标签"}
    ],
    "returns": {
      "type": "Object",
      "description": "更新后的账单对象"
    },
    "examples": [
      {
        "title": "更新账单金额",
        "code": "const updated = await Memento.plugins.bill.updateBill({billId: 'bill456', accountId: 'acc123', amount: -150});\nsetResult(`金额已更新为: ${updated.amount}`);"
      }
    ],
    "notes": "仅更新提供的字段，其他字段保持不变",
    "enabled": true
  },
  "deleteBill": {
    "title": "删除账单",
    "description": "删除指定的账单",
    "parameters": [
      {"name": "accountId", "type": "string", "required": true, "description": "账户ID"},
      {"name": "billId", "type": "string", "required": true, "description": "账单ID"}
    ],
    "returns": {
      "type": "boolean",
      "description": "删除成功返回 true"
    },
    "examples": [
      {
        "title": "删除账单",
        "code": "const result = await Memento.plugins.bill.deleteBill({accountId: 'acc123', billId: 'bill456'});\nsetResult(result.success ? '删除成功' : (result.error || '删除失败'));"
      }
    ],
    "notes": "删除操作不可逆",
    "enabled": true
  },
  "getStats": {
    "title": "获取财务统计",
    "description": "获取指定时间范围的财务统计信息",
    "parameters": [
      {"name": "startDate", "type": "string", "required": false, "description": "开始日期（格式：YYYY-MM-DD）"},
      {"name": "endDate", "type": "string", "required": false, "description": "结束日期（格式：YYYY-MM-DD）"},
      {"name": "accountId", "type": "string", "required": false, "description": "账户ID（不传则统计所有账户）"}
    ],
    "returns": {
      "type": "Object",
      "description": "统计对象，包含 totalIncome（总收入）、totalExpense（总支出）、balance（余额）、billCount（账单数）等字段"
    },
    "examples": [
      {
        "title": "获取本月统计",
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst year = timeInfo.year;\nconst month = String(timeInfo.month).padStart(2, '0');\nconst lastDay = new Date(year, timeInfo.month, 0).getDate();\nconst startDate = `${year}-${month}-01`;\nconst endDate = `${year}-${month}-${String(lastDay).padStart(2, '0')}`;\nconst stats = await Memento.plugins.bill.getStats({startDate, endDate});\nsetResult(`本月收入: ${stats.totalIncome}, 支出: ${stats.totalExpense}, 余额: ${stats.balance}`);"
      },
      {
        "title": "获取全部统计",
        "code": "const stats = await Memento.plugins.bill.getStats({});\nsetResult(JSON.stringify(stats, null, 2));"
      }
    ],
    "notes": "统计信息还包括 todayFinance（今日财务）、monthFinance（本月财务）、monthBillCount（本月记账数）",
    "enabled": true
  },
  "getCategoryStats": {
    "title": "获取分类统计",
    "description": "获取按分类统计的收支金额",
    "parameters": [
      {"name": "startDate", "type": "string", "required": false, "description": "开始日期（格式：YYYY-MM-DD）"},
      {"name": "endDate", "type": "string", "required": false, "description": "结束日期（格式：YYYY-MM-DD）"},
      {"name": "accountId", "type": "string", "required": false, "description": "账户ID（不传则统计所有账户）"}
    ],
    "returns": {
      "type": "Object",
      "description": "分类统计对象，键为分类名称，值为该分类的总金额"
    },
    "examples": [
      {
        "title": "获取本月分类统计",
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst year = timeInfo.year;\nconst month = String(timeInfo.month).padStart(2, '0');\nconst lastDay = new Date(year, timeInfo.month, 0).getDate();\nconst startDate = `${year}-${month}-01`;\nconst endDate = `${year}-${month}-${String(lastDay).padStart(2, '0')}`;\nconst catStats = await Memento.plugins.bill.getCategoryStats({startDate, endDate});\nsetResult(JSON.stringify(catStats, null, 2));"
      }
    ],
    "notes": "返回示例: {\"工资\": 5000.00, \"餐饮\": -800.00, \"交通\": -200.00}",
    "enabled": true
  },
  "findAccountBy": {
    "title": "通用账户查找",
    "description": "根据自定义条件查找账户（支持单条/多条结果）",
    "parameters": [
      {"name": "field", "type": "string", "required": true, "description": "要匹配的字段名（如：id、title、totalAmount）"},
      {"name": "value", "type": "any", "required": true, "description": "要匹配的值"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false，只返回第一个）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个账户对象或 null；findAll=true 时返回账户数组"
    },
    "examples": [
      {
        "title": "根据 ID 查找账户",
        "code": "const account = await Memento.plugins.bill.findAccountBy({field: 'id', value: 'acc123'});\nif (account) {\n  setResult(`找到账户: ${account.title}，余额: ${account.totalAmount}`);\n} else {\n  setResult('未找到该账户');\n}"
      },
      {
        "title": "根据名称查找账户",
        "code": "const account = await Memento.plugins.bill.findAccountBy({field: 'title', value: '支付宝'});\nsetResult(account ? `账户ID: ${account.id}` : '未找到');"
      },
      {
        "title": "查找所有余额大于1000的账户",
        "code": "const accounts = await Memento.plugins.bill.getAccounts({});\nconst richAccounts = accounts.filter(acc => acc.totalAmount > 1000);\nsetResult(`找到 ${richAccounts.length} 个账户`);"
      }
    ],
    "notes": "简化查找逻辑，避免手动遍历账户列表；支持任意字段匹配；对于数值比较等复杂条件，建议先用 getAccounts 获取后自行 filter",
    "enabled": true
  },
  "findAccountById": {
    "title": "根据ID查找账户",
    "description": "快速根据账户ID查找单个账户（findAccountBy 的便捷方法）",
    "parameters": [
      {"name": "id", "type": "string", "required": true, "description": "账户ID"}
    ],
    "returns": {
      "type": "Object|null",
      "description": "找到的账户对象，未找到返回 null"
    },
    "examples": [
      {
        "title": "查找指定ID的账户",
        "code": "const account = await Memento.plugins.bill.findAccountById({id: 'acc123'});\nif (account) {\n  setResult(`账户名: ${account.title}, 余额: ${account.totalAmount}`);\n} else {\n  setResult('账户不存在');\n}"
      }
    ],
    "notes": "等价于 findAccountBy({field: 'id', value: id})",
    "enabled": true
  },
  "findAccountByName": {
    "title": "根据名称查找账户",
    "description": "根据账户名称查找账户（支持精确匹配或模糊匹配）",
    "parameters": [
      {"name": "name", "type": "string", "required": true, "description": "账户名称"},
      {"name": "fuzzy", "type": "boolean", "required": false, "description": "是否模糊匹配（默认 false，精确匹配）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个账户或 null；findAll=true 时返回账户数组"
    },
    "examples": [
      {
        "title": "精确匹配账户名",
        "code": "const account = await Memento.plugins.bill.findAccountByName({name: '支付宝账户'});\nsetResult(account ? `找到账户ID: ${account.id}` : '未找到');"
      },
      {
        "title": "模糊匹配账户名",
        "code": "const accounts = await Memento.plugins.bill.findAccountByName({name: '现金', fuzzy: true, findAll: true});\nsetResult(`找到 ${accounts.length} 个包含现金的账户`);"
      }
    ],
    "notes": "精确匹配使用 ===，模糊匹配使用 includes",
    "enabled": true
  },
  "findBillBy": {
    "title": "通用账单查找",
    "description": "根据自定义条件查找账单（支持单条/多条结果）",
    "parameters": [
      {"name": "field", "type": "string", "required": true, "description": "要匹配的字段名（如：id、title、category、amount）"},
      {"name": "value", "type": "any", "required": true, "description": "要匹配的值"},
      {"name": "accountId", "type": "string", "required": false, "description": "限定在特定账户内查找（可选）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个账单或 null；findAll=true 时返回账单数组"
    },
    "examples": [
      {
        "title": "根据ID查找账单",
        "code": "const bill = await Memento.plugins.bill.findBillBy({field: 'id', value: 'bill123'});\nif (bill) {\n  setResult(`账单: ${bill.title}, 金额: ${bill.amount}`);\n} else {\n  setResult('未找到该账单');\n}"
      },
      {
        "title": "查找特定分类的账单",
        "code": "const bills = await Memento.plugins.bill.findBillBy({field: 'category', value: '餐饮', findAll: true});\nsetResult(`找到 ${bills.length} 条餐饮账单`);"
      },
      {
        "title": "在指定账户中查找账单",
        "code": "const bill = await Memento.plugins.bill.findBillBy({field: 'title', value: '午餐', accountId: 'acc123'});\nsetResult(bill ? `找到账单，金额: ${bill.amount}` : '未找到');"
      }
    ],
    "notes": "简化查找逻辑，避免手动遍历账单列表；accountId 可选，不传则在所有账户中查找",
    "enabled": true
  },
  "findBillById": {
    "title": "根据ID查找账单",
    "description": "快速根据账单ID查找单个账单（findBillBy 的便捷方法）",
    "parameters": [
      {"name": "id", "type": "string", "required": true, "description": "账单ID"},
      {"name": "accountId", "type": "string", "required": false, "description": "限定在特定账户内查找（可选，提高性能）"}
    ],
    "returns": {
      "type": "Object|null",
      "description": "找到的账单对象，未找到返回 null"
    },
    "examples": [
      {
        "title": "查找指定ID的账单",
        "code": "const bill = await Memento.plugins.bill.findBillById({id: 'bill123'});\nif (bill) {\n  setResult(`账单标题: ${bill.title}, 金额: ${bill.amount}, 分类: ${bill.category}`);\n} else {\n  setResult('账单不存在');\n}"
      }
    ],
    "notes": "等价于 findBillBy({field: 'id', value: id, accountId})",
    "enabled": true
  },
  "findBillByTitle": {
    "title": "根据标题查找账单",
    "description": "根据账单标题查找账单（支持精确匹配或模糊匹配）",
    "parameters": [
      {"name": "title", "type": "string", "required": true, "description": "账单标题"},
      {"name": "fuzzy", "type": "boolean", "required": false, "description": "是否模糊匹配（默认 false）"},
      {"name": "accountId", "type": "string", "required": false, "description": "限定在特定账户内查找（可选）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个账单或 null；findAll=true 时返回账单数组"
    },
    "examples": [
      {
        "title": "精确匹配账单标题",
        "code": "const bill = await Memento.plugins.bill.findBillByTitle({title: '午餐'});\nsetResult(bill ? `金额: ${bill.amount}` : '未找到');"
      },
      {
        "title": "模糊匹配查找所有包含关键词的账单",
        "code": "const bills = await Memento.plugins.bill.findBillByTitle({title: '地铁', fuzzy: true, findAll: true});\nconst total = bills.reduce((sum, b) => sum + b.amount, 0);\nsetResult(`找到 ${bills.length} 条地铁相关账单，合计: ${total}`);"
      }
    ],
    "notes": "精确匹配使用 ===，模糊匹配使用 includes",
    "enabled": true
  },
  "findBillsByCategory": {
    "title": "根据分类查找账单",
    "description": "查找指定分类的所有账单",
    "parameters": [
      {"name": "category", "type": "string", "required": true, "description": "分类名称"},
      {"name": "accountId", "type": "string", "required": false, "description": "限定在特定账户内查找（可选）"},
      {"name": "startDate", "type": "string", "required": false, "description": "开始日期（格式：YYYY-MM-DD）"},
      {"name": "endDate", "type": "string", "required": false, "description": "结束日期（格式：YYYY-MM-DD）"}
    ],
    "returns": {
      "type": "Array",
      "description": "该分类的所有账单列表"
    },
    "examples": [
      {
        "title": "查找所有餐饮账单",
        "code": "const bills = await Memento.plugins.bill.findBillsByCategory({category: '餐饮'});\nconst total = bills.reduce((sum, b) => sum + b.amount, 0);\nsetResult(`餐饮账单共 ${bills.length} 条，合计: ${total}`);"
      },
      {
        "title": "查找本月工资收入",
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst year = timeInfo.year;\nconst month = String(timeInfo.month).padStart(2, '0');\nconst lastDay = new Date(year, timeInfo.month, 0).getDate();\nconst startDate = `${year}-${month}-01`;\nconst endDate = `${year}-${month}-${String(lastDay).padStart(2, '0')}`;\nconst bills = await Memento.plugins.bill.findBillsByCategory({category: '工资', startDate, endDate});\nconst total = bills.reduce((sum, b) => sum + b.amount, 0);\nsetResult(`本月工资: ${total}`);"
      }
    ],
    "notes": "等价于 findBillBy({field: 'category', value: category, findAll: true}) 但支持日期过滤",
    "enabled": true
  }
}
