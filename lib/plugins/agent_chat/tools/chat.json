{
  "getChannels": {
    "title": "获取所有频道",
    "description": "获取所有聊天频道的列表",
    "parameters": [],
    "returns": {
      "type": "Array",
      "description": "频道列表，每个元素包含 id、name、lastMessage 等字段"
    },
    "examples": [
      {
        "title": "获取所有频道",
        "code": "const channels = await Memento.plugins.chat.getChannels();\nsetResult(JSON.stringify(channels, null, 2));"
      }
    ],
    "notes": "返回所有聊天频道，不包含具体的消息内容",
    "enabled": true
  },
  "createChannel": {
    "title": "创建频道",
    "description": "创建一个新的聊天频道",
    "parameters": [
      {"name": "name", "type": "string", "required": true, "description": "频道名称"},
      {"name": "channelId", "type": "string", "required": false, "description": "频道ID（可选，不传则自动生成）"}
    ],
    "returns": {
      "type": "Object",
      "description": "新创建的频道对象"
    },
    "examples": [
      {
        "title": "创建频道（自动生成ID）",
        "code": "const channel = await Memento.plugins.chat.createChannel({name: '工作交流'});\nsetResult(`频道已创建: ${channel.title}`);"
      },
      {
        "title": "创建频道（指定ID）",
        "code": "const channel = await Memento.plugins.chat.createChannel({name: '测试频道', channelId: 'channel123'});\nsetResult(`频道已创建: ${channel.title} (ID: ${channel.id})`);"
      }
    ],
    "notes": "新创建的频道初始为空，不包含任何消息。支持传入自定义频道ID，方便调试和测试",
    "enabled": true
  },
  "deleteChannel": {
    "title": "删除频道",
    "description": "删除指定的频道（包括所有消息）",
    "parameters": [
      {"name": "channelId", "type": "string", "required": true, "description": "频道ID"}
    ],
    "returns": {
      "type": "Object",
      "description": "操作结果对象，包含 success 字段"
    },
    "examples": [
      {
        "title": "删除频道",
        "code": "const result = await Memento.plugins.chat.deleteChannel({channelId: 'channel123'});\nsetResult(result.success ? '删除成功' : '删除失败');"
      }
    ],
    "notes": "删除操作不可逆，会同时删除该频道下的所有消息",
    "enabled": true
  },
  "sendMessage": {
    "title": "发送消息",
    "description": "在指定频道发送一条消息",
    "parameters": [
      {"name": "channelId", "type": "string", "required": true, "description": "频道ID"},
      {"name": "content", "type": "string", "required": true, "description": "消息内容"},
      {"name": "type", "type": "string", "required": false, "description": "消息类型（默认为 sent）"}
    ],
    "returns": {
      "type": "Object",
      "description": "新发送的消息对象"
    },
    "examples": [
      {
        "title": "发送文本消息",
        "code": "const message = await Memento.plugins.chat.sendMessage({\n  channelId: 'channel123',\n  content: '你好，这是一条测试消息'\n});\nsetResult(`消息已发送: ${message.id}`);"
      }
    ],
    "notes": "消息发送者自动设置为当前用户",
    "enabled": true
  },
  "getMessages": {
    "title": "获取频道消息",
    "description": "获取指定频道的所有消息",
    "parameters": [
      {"name": "channelId", "type": "string", "required": true, "description": "频道ID"},
      {"name": "limit", "type": "number", "required": false, "description": "限制返回的消息数量"}
    ],
    "returns": {
      "type": "Array",
      "description": "消息列表，每条消息包含 id、content、userId、timestamp 等字段"
    },
    "examples": [
      {
        "title": "获取频道消息",
        "code": "const messages = await Memento.plugins.chat.getMessages({channelId: 'channel123'});\nsetResult(`频道共有 ${messages.length} 条消息`);"
      },
      {
        "title": "获取最新10条消息",
        "code": "const messages = await Memento.plugins.chat.getMessages({channelId: 'channel123', limit: 10});\nsetResult(JSON.stringify(messages, null, 2));"
      }
    ],
    "notes": "消息按时间升序排列",
    "enabled": true
  },
  "deleteMessage": {
    "title": "删除消息",
    "description": "删除指定的消息",
    "parameters": [
      {"name": "channelId", "type": "string", "required": true, "description": "频道ID"},
      {"name": "messageId", "type": "string", "required": true, "description": "消息ID"}
    ],
    "returns": {
      "type": "Object",
      "description": "操作结果对象，包含 success 字段"
    },
    "examples": [
      {
        "title": "删除消息",
        "code": "const result = await Memento.plugins.chat.deleteMessage({channelId: 'channel123', messageId: 'msg456'});\nsetResult(result.success ? '删除成功' : '删除失败');"
      }
    ],
    "notes": "删除操作不可逆",
    "enabled": true
  },
  "getCurrentUser": {
    "title": "获取当前用户",
    "description": "获取当前登录用户的信息",
    "parameters": [],
    "returns": {
      "type": "Object",
      "description": "用户对象，包含 id、name、avatar 等字段"
    },
    "examples": [
      {
        "title": "获取当前用户",
        "code": "const user = await Memento.plugins.chat.getCurrentUser();\nsetResult(JSON.stringify(user, null, 2));"
      }
    ],
    "notes": "返回当前用户的基本信息",
    "enabled": true
  },
  "getAIUser": {
    "title": "获取AI用户",
    "description": "获取AI助手用户的信息",
    "parameters": [],
    "returns": {
      "type": "Object",
      "description": "AI用户对象，包含 id、name、avatar、isAI 等字段"
    },
    "examples": [
      {
        "title": "获取AI用户",
        "code": "const aiUser = await Memento.plugins.chat.getAIUser();\nsetResult(JSON.stringify(aiUser, null, 2));"
      }
    ],
    "notes": "返回AI助手的用户信息，isAI 字段为 true",
    "enabled": true
  },
  "findChannelBy": {
    "title": "通用频道查找",
    "description": "根据自定义条件查找频道（支持单条/多条结果）",
    "parameters": [
      {"name": "field", "type": "string", "required": true, "description": "要匹配的字段名（如：id、title）"},
      {"name": "value", "type": "any", "required": true, "description": "要匹配的值"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false，只返回第一个）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个频道对象或 null；findAll=true 时返回频道数组"
    },
    "examples": [
      {
        "title": "根据 ID 查找频道",
        "code": "const channel = await Memento.plugins.chat.findChannelBy({field: 'id', value: 'channel123'});\nif (channel) {\n  setResult(`找到频道: ${channel.title}`);\n} else {\n  setResult('未找到该频道');\n}"
      }
    ],
    "notes": "简化查找逻辑，避免手动遍历频道列表；支持任意字段匹配",
    "enabled": true
  },
  "findChannelById": {
    "title": "根据ID查找频道",
    "description": "快速根据频道ID查找单个频道（findChannelBy 的便捷方法）",
    "parameters": [
      {"name": "id", "type": "string", "required": true, "description": "频道ID"}
    ],
    "returns": {
      "type": "Object|null",
      "description": "找到的频道对象，未找到返回 null"
    },
    "examples": [
      {
        "title": "查找指定ID的频道",
        "code": "const channel = await Memento.plugins.chat.findChannelById({id: 'channel123'});\nif (channel) {\n  setResult(`频道名: ${channel.title}`);\n} else {\n  setResult('频道不存在');\n}"
      }
    ],
    "notes": "等价于 findChannelBy({field: 'id', value: id})",
    "enabled": true
  },
  "findChannelByTitle": {
    "title": "根据标题查找频道",
    "description": "根据频道标题查找频道（支持精确匹配或模糊匹配）",
    "parameters": [
      {"name": "title", "type": "string", "required": true, "description": "频道标题"},
      {"name": "fuzzy", "type": "boolean", "required": false, "description": "是否模糊匹配（默认 false，精确匹配）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个频道或 null；findAll=true 时返回频道数组"
    },
    "examples": [
      {
        "title": "精确匹配频道标题",
        "code": "const channel = await Memento.plugins.chat.findChannelByTitle({title: '工作交流'});\nsetResult(channel ? `找到频道ID: ${channel.id}` : '未找到');"
      },
      {
        "title": "模糊匹配频道标题",
        "code": "const channels = await Memento.plugins.chat.findChannelByTitle({title: '工作', fuzzy: true, findAll: true});\nsetResult(`找到 ${channels.length} 个包含【工作】的频道`);"
      }
    ],
    "notes": "精确匹配使用 ===，模糊匹配使用 includes",
    "enabled": true
  },
  "findMessageBy": {
    "title": "通用消息查找",
    "description": "根据自定义条件查找消息（支持单条/多条结果）",
    "parameters": [
      {"name": "field", "type": "string", "required": true, "description": "要匹配的字段名（如：id、content、userId）"},
      {"name": "value", "type": "any", "required": true, "description": "要匹配的值"},
      {"name": "channelId", "type": "string", "required": false, "description": "限定在特定频道内查找（可选）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个消息或 null；findAll=true 时返回消息数组"
    },
    "examples": [
      {
        "title": "根据ID查找消息",
        "code": "const message = await Memento.plugins.chat.findMessageBy({field: 'id', value: 'msg123'});\nif (message) {\n  setResult(`消息: ${message.content}`);\n} else {\n  setResult('未找到该消息');\n}"
      },
      {
        "title": "在指定频道中查找消息",
        "code": "const message = await Memento.plugins.chat.findMessageBy({field: 'content', value: '你好', channelId: 'channel123'});\nsetResult(message ? `找到消息` : '未找到');"
      }
    ],
    "notes": "简化查找逻辑，避免手动遍历消息列表；channelId 可选，不传则在所有频道中查找",
    "enabled": true
  },
  "findMessageById": {
    "title": "根据ID查找消息",
    "description": "快速根据消息ID查找单个消息（findMessageBy 的便捷方法）",
    "parameters": [
      {"name": "id", "type": "string", "required": true, "description": "消息ID"},
      {"name": "channelId", "type": "string", "required": false, "description": "限定在特定频道内查找（可选，提高性能）"}
    ],
    "returns": {
      "type": "Object|null",
      "description": "找到的消息对象，未找到返回 null"
    },
    "examples": [
      {
        "title": "查找指定ID的消息",
        "code": "const message = await Memento.plugins.chat.findMessageById({id: 'msg123'});\nif (message) {\n  setResult(`消息内容: ${message.content}`);\n} else {\n  setResult('消息不存在');\n}"
      }
    ],
    "notes": "等价于 findMessageBy({field: 'id', value: id, channelId})",
    "enabled": true
  },
  "findMessageByContent": {
    "title": "根据内容查找消息",
    "description": "根据消息内容查找消息（支持精确匹配或模糊匹配）",
    "parameters": [
      {"name": "content", "type": "string", "required": true, "description": "消息内容"},
      {"name": "fuzzy", "type": "boolean", "required": false, "description": "是否模糊匹配（默认 false）"},
      {"name": "channelId", "type": "string", "required": false, "description": "限定在特定频道内查找（可选）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个消息或 null；findAll=true 时返回消息数组"
    },
    "examples": [
      {
        "title": "精确匹配消息内容",
        "code": "const message = await Memento.plugins.chat.findMessageByContent({content: '你好'});\nsetResult(message ? `找到消息ID: ${message.id}` : '未找到');"
      },
      {
        "title": "模糊匹配查找所有包含关键词的消息",
        "code": "const messages = await Memento.plugins.chat.findMessageByContent({content: '项目', fuzzy: true, findAll: true});\nsetResult(`找到 ${messages.length} 条包含"项目"的消息`);"
      }
    ],
    "notes": "精确匹配使用 ===，模糊匹配使用 includes",
    "enabled": true
  }
}
