{
  "todo_getTasks": {
    "title": "获取任务列表",
    "description": "查询待办任务,支持按状态和优先级筛选。返回任务对象数组。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "查询参数对象",
        "properties": {
          "status": {
            "type": "string",
            "optional": true,
            "description": "任务状态:'todo'(待办) | 'inProgress'(进行中) | 'in_progress'(进行中) | 'done'(已完成)"
          },
          "priority": {
            "type": "string",
            "optional": true,
            "description": "优先级:'low'(低) | 'medium'(中) | 'high'(高)"
          }
        }
      }
    ],
    "returns": {
      "type": "Promise<Array>",
      "description": "任务对象数组"
    },
    "examples": [
      {
        "code": "const allTasks = await Memento.plugins.todo.getTasks({});\nsetResult(allTasks);",
        "comment": "获取所有任务"
      },
      {
        "code": "const todoTasks = await Memento.plugins.todo.getTasks({ status: 'todo' });\nsetResult(todoTasks);",
        "comment": "获取待办任务"
      },
      {
        "code": "const highPriorityTasks = await Memento.plugins.todo.getTasks({ priority: 'high' });\nsetResult(highPriorityTasks);",
        "comment": "获取高优先级任务"
      },
      {
        "code": "const inProgressHigh = await Memento.plugins.todo.getTasks({ status: 'inProgress', priority: 'high' });\nsetResult(inProgressHigh);",
        "comment": "获取进行中的高优先级任务"
      }
    ],
    "notes": "所有插件方法都是异步的,必须使用 await。返回值为对象。",
    "enabled": true
  },
  "todo_getTask": {
    "title": "获取任务详情",
    "description": "根据任务ID获取单个任务的详细信息。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "查询参数对象",
        "properties": {
          "taskId": {
            "type": "string",
            "optional": false,
            "description": "任务 ID"
          }
        }
      }
    ],
    "returns": {
      "type": "Promise<Object>",
      "description": "任务对象,失败时返回 {error: '...'}"
    },
    "examples": [
      {
        "code": "const task = await Memento.plugins.todo.getTask({ taskId: 'task123' });\nsetResult(task);",
        "comment": "获取指定任务的详情"
      }
    ],
    "notes": "失败时返回包含 error 字段的对象。",
    "enabled": true
  },
  "todo_getTodayTasks": {
    "title": "获取今日任务",
    "description": "获取日期范围包含今天的所有任务。包括:1)今天开始的任务 2)今天截止的任务 3)跨越今天的任务(开始日期≤今天≤截止日期)。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "参数对象(无需实际参数,但保持接口一致性)"
      }
    ],
    "returns": {
      "type": "Promise<Array>",
      "description": "今日任务对象数组"
    },
    "examples": [
      {
        "code": "const tasks = await Memento.plugins.todo.getTodayTasks({});\nsetResult(tasks);",
        "comment": "获取今日任务"
      }
    ],
    "notes": "无需参数,返回所有日期范围包含今天的任务。例如:一个从昨天到明天的任务,也会被认为是今日任务。",
    "enabled": true
  },
  "todo_getOverdueTasks": {
    "title": "获取过期任务",
    "description": "获取截止日期已过且未完成的任务。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "参数对象(无需实际参数,但保持接口一致性)"
      }
    ],
    "returns": {
      "type": "Promise<Array>",
      "description": "过期任务对象数组"
    },
    "examples": [
      {
        "code": "const tasks = await Memento.plugins.todo.getOverdueTasks({});\nsetResult(tasks);",
        "comment": "获取过期任务"
      }
    ],
    "notes": "仅返回未完成且截止日期已过的任务。",
    "enabled": true
  },
  "todo_createTask": {
    "title": "创建任务",
    "description": "创建新的待办任务,支持设置标题、描述、日期、优先级和标签。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "任务创建参数对象",
        "properties": {
          "title": {
            "type": "string",
            "optional": false,
            "description": "任务标题(必需)"
          },
          "id": {
            "type": "string",
            "optional": true,
            "description": "任务ID(可选,不提供则自动生成)"
          },
          "description": {
            "type": "string",
            "optional": true,
            "description": "任务描述"
          },
          "startDate": {
            "type": "string",
            "optional": true,
            "description": "开始日期,ISO 8601 格式字符串,例如 '2025-01-15T00:00:00.000Z'"
          },
          "dueDate": {
            "type": "string",
            "optional": true,
            "description": "截止日期,ISO 8601 格式字符串"
          },
          "priority": {
            "type": "string",
            "optional": true,
            "description": "优先级:'low' | 'medium' | 'high',默认 'medium'"
          },
          "tags": {
            "type": "string",
            "optional": true,
            "description": "标签数组的 JSON 字符串,例如 '[\"工作\",\"紧急\"]'"
          }
        }
      }
    ],
    "returns": {
      "type": "Promise<Object>",
      "description": "新建的任务对象"
    },
    "examples": [
      {
        "code": "const task1 = await Memento.plugins.todo.createTask({ title: '完成项目文档' });\nsetResult(task1);",
        "comment": "创建简单任务"
      },
      {
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst today = new Date(timeInfo.timestamp);\nconst startTime = today.toISOString().replace(/T.*/, 'T09:00:00.000Z');\nconst endDate = new Date(today);\nendDate.setDate(today.getDate() + 5);\nconst endTime = endDate.toISOString().replace(/T.*/, 'T18:00:00.000Z');\nconst task2 = await Memento.plugins.todo.createTask({\n  title: '编写需求分析',\n  description: '详细描述项目需求和功能点',\n  startDate: startTime,\n  dueDate: endTime,\n  priority: 'high',\n  tags: '[\"工作\",\"文档\",\"紧急\"]'\n});\nsetResult(task2);",
        "comment": "创建完整任务(从今天到5天后)"
      },
      {
        "code": "const task3 = await Memento.plugins.todo.createTask({\n  id: 'task123',\n  title: '重要会议',\n  description: '与客户讨论项目进展',\n  priority: 'high',\n  tags: '[\"工作\",\"会议\"]'\n});\nsetResult(`任务已创建，自定义ID: ${task3.id}`);",
        "comment": "使用自定义ID创建任务"
      }
    ],
    "notes": "必需参数: title(任务标题);可选参数: id(自定义ID)、description(任务描述)、startDate/dueDate(日期)、priority(优先级)、tags(标签);如果不提供id会自动生成UUID;ID不能与现有任务重复;日期参数必须使用 ISO 8601 格式字符串;tags 需要传入 JSON 字符串格式。",
    "enabled": true
  },
  "todo_updateTask": {
    "title": "更新任务",
    "description": "更新现有任务的属性,支持更新标题、描述、状态、优先级、日期和标签。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "任务更新参数对象",
        "properties": {
          "taskId": {
            "type": "string",
            "optional": false,
            "description": "任务 ID(必需)"
          },
          "updates": {
            "type": "object",
            "optional": false,
            "description": "更新内容对象(必需),可包含字段:title, description, priority, status, startDate, dueDate, tags"
          }
        }
      }
    ],
    "returns": {
      "type": "Promise<Object>",
      "description": "更新后的任务对象"
    },
    "examples": [
      {
        "code": "const updated = await Memento.plugins.todo.updateTask({\n  taskId: 'task123',\n  updates: {\n    title: '新标题',\n    priority: 'high',\n    tags: ['工作', '紧急', '重要']\n  }\n});\nsetResult(updated);",
        "comment": "更新任务标题和优先级"
      },
      {
        "code": "const updated2 = await Memento.plugins.todo.updateTask({\n  taskId: 'task123',\n  updates: { status: 'inProgress' }\n});\nsetResult(updated2);",
        "comment": "更新任务状态"
      }
    ],
    "notes": "可更新字段:title(标题), description(描述), priority(优先级), status(状态), startDate(开始日期), dueDate(截止日期), tags(标签数组)。status 可选值:'todo', 'inProgress', 'done'。",
    "enabled": true
  },
  "todo_deleteTask": {
    "title": "删除任务",
    "description": "根据任务ID删除指定的任务。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "删除参数对象",
        "properties": {
          "taskId": {
            "type": "string",
            "optional": false,
            "description": "任务 ID(必需)"
          }
        }
      }
    ],
    "returns": {
      "type": "Promise<Object>",
      "description": "成功时返回 {success: true, taskId: '...'},失败时返回 {error: '...'}"
    },
    "examples": [
      {
        "code": "const result = await Memento.plugins.todo.deleteTask({ taskId: 'task123' });\nsetResult(result);",
        "comment": "删除任务"
      }
    ],
    "notes": "删除操作不可恢复,请谨慎使用。",
    "enabled": true
  },
  "todo_completeTask": {
    "title": "完成任务",
    "description": "标记任务为已完成,会自动停止计时器并完成所有子任务。",
    "parameters": [
      {
        "name": "params",
        "type": "object",
        "optional": false,
        "description": "完成参数对象",
        "properties": {
          "taskId": {
            "type": "string",
            "optional": false,
            "description": "任务 ID(必需)"
          }
        }
      }
    ],
    "returns": {
      "type": "Promise<Object>",
      "description": "完成后的任务对象"
    },
    "examples": [
      {
        "code": "const task = await Memento.plugins.todo.completeTask({ taskId: 'task123' });\nsetResult(task);",
        "comment": "完成任务"
      }
    ],
    "notes": "会自动将 status 设置为 'done',停止计时器,并完成所有子任务。",
    "enabled": true
  },
  "findTaskBy": {
    "title": "通用任务查找",
    "description": "根据自定义条件查找任务（支持单条/多条结果）",
    "parameters": [
      {"name": "field", "type": "string", "required": true, "description": "要匹配的字段名（如：id、title、status、priority）"},
      {"name": "value", "type": "any", "required": true, "description": "要匹配的值"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false，只返回第一个）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个任务对象或 null；findAll=true 时返回任务数组"
    },
    "examples": [
      {
        "title": "根据 ID 查找任务",
        "code": "const task = await Memento.plugins.todo.findTaskBy({field: 'id', value: 'task123'});\nif (task) {\n  setResult(`找到任务: ${task.title}`);\n} else {\n  setResult('未找到该任务');\n}"
      },
      {
        "title": "查找所有高优先级任务",
        "code": "const tasks = await Memento.plugins.todo.findTaskBy({field: 'priority', value: 'high', findAll: true});\nsetResult(`找到 ${tasks.length} 个高优先级任务`);"
      }
    ],
    "notes": "简化查找逻辑，避免手动遍历任务列表；支持任意字段匹配",
    "enabled": true
  },
  "findTaskById": {
    "title": "根据ID查找任务",
    "description": "快速根据任务ID查找单个任务（findTaskBy 的便捷方法）",
    "parameters": [
      {"name": "id", "type": "string", "required": true, "description": "任务ID"}
    ],
    "returns": {
      "type": "Object|null",
      "description": "找到的任务对象，未找到返回 null"
    },
    "examples": [
      {
        "title": "查找指定ID的任务",
        "code": "const task = await Memento.plugins.todo.findTaskById({id: 'task123'});\nif (task) {\n  setResult(`任务: ${task.title}, 状态: ${task.status}`);\n} else {\n  setResult('任务不存在');\n}"
      }
    ],
    "notes": "等价于 findTaskBy({field: 'id', value: id})",
    "enabled": true
  },
  "findTaskByTitle": {
    "title": "根据标题查找任务",
    "description": "根据任务标题查找任务（支持精确匹配或模糊匹配）",
    "parameters": [
      {"name": "title", "type": "string", "required": true, "description": "任务标题"},
      {"name": "fuzzy", "type": "boolean", "required": false, "description": "是否模糊匹配（默认 false，精确匹配）"},
      {"name": "findAll", "type": "boolean", "required": false, "description": "是否返回所有匹配项（默认 false）"}
    ],
    "returns": {
      "type": "Object|Array|null",
      "description": "findAll=false 时返回单个任务或 null；findAll=true 时返回任务数组"
    },
    "examples": [
      {
        "title": "精确匹配任务标题",
        "code": "const task = await Memento.plugins.todo.findTaskByTitle({title: '完成项目文档'});\nsetResult(task ? `找到任务ID: ${task.id}` : '未找到');"
      },
      {
        "title": "模糊匹配查找所有包含关键词的任务",
        "code": "const tasks = await Memento.plugins.todo.findTaskByTitle({title: '文档', fuzzy: true, findAll: true});\nsetResult(`找到 ${tasks.length} 个包含"文档"的任务`);"
      }
    ],
    "notes": "精确匹配使用 ===，模糊匹配使用 contains",
    "enabled": true
  },
  "findTasksByTag": {
    "title": "根据标签查找任务",
    "description": "查找包含指定标签的所有任务",
    "parameters": [
      {"name": "tag", "type": "string", "required": true, "description": "标签名称"},
      {"name": "status", "type": "string", "required": false, "description": "可选的状态过滤: 'todo' | 'inProgress' | 'done'"},
      {"name": "priority", "type": "string", "required": false, "description": "可选的优先级过滤: 'low' | 'medium' | 'high'"}
    ],
    "returns": {
      "type": "Array",
      "description": "包含该标签的任务列表"
    },
    "examples": [
      {
        "title": "查找所有带"工作"标签的任务",
        "code": "const tasks = await Memento.plugins.todo.findTasksByTag({tag: '工作'});\nsetResult(`找到 ${tasks.length} 个工作任务`);"
      },
      {
        "title": "查找带"紧急"标签且未完成的任务",
        "code": "const tasks = await Memento.plugins.todo.findTasksByTag({tag: '紧急', status: 'todo'});\nsetResult(`找到 ${tasks.length} 个紧急待办任务`);"
      }
    ],
    "notes": "标签匹配区分大小写；支持额外的状态和优先级过滤",
    "enabled": true
  },
  "findTasksByStatus": {
    "title": "根据状态查找任务",
    "description": "查找指定状态的所有任务（扩展 getTasks 功能）",
    "parameters": [
      {"name": "status", "type": "string", "required": true, "description": "任务状态: 'todo' | 'inProgress' | 'done'"},
      {"name": "startDate", "type": "string", "required": false, "description": "开始日期过滤（ISO 8601 格式）"},
      {"name": "endDate", "type": "string", "required": false, "description": "结束日期过滤（ISO 8601 格式）"}
    ],
    "returns": {
      "type": "Array",
      "description": "该状态的任务列表"
    },
    "examples": [
      {
        "title": "查找所有进行中的任务",
        "code": "const tasks = await Memento.plugins.todo.findTasksByStatus({status: 'inProgress'});\nsetResult(`进行中: ${tasks.length} 个任务`);"
      },
      {
        "title": "查找本周完成的任务",
        "code": "const timeInfo = await Memento.system.getCurrentTime();\nconst today = new Date(timeInfo.timestamp);\nconst weekStart = new Date(today);\nweekStart.setDate(today.getDate() - today.getDay() + 1);\nconst weekEnd = new Date(weekStart);\nweekEnd.setDate(weekStart.getDate() + 6);\nconst tasks = await Memento.plugins.todo.findTasksByStatus({status: 'done', startDate: weekStart.toISOString(), endDate: weekEnd.toISOString()});\nsetResult(`本周完成 ${tasks.length} 个任务`);"
      }
    ],
    "notes": "日期过滤基于任务的 dueDate 或 completedDate 字段",
    "enabled": true
  },
  "findTasksByPriority": {
    "title": "根据优先级查找任务",
    "description": "查找指定优先级的所有任务",
    "parameters": [
      {"name": "priority", "type": "string", "required": true, "description": "优先级: 'low' | 'medium' | 'high'"},
      {"name": "status", "type": "string", "required": false, "description": "可选的状态过滤"}
    ],
    "returns": {
      "type": "Array",
      "description": "该优先级的任务列表"
    },
    "examples": [
      {
        "title": "查找所有高优先级任务",
        "code": "const tasks = await Memento.plugins.todo.findTasksByPriority({priority: 'high'});\nsetResult(`高优先级: ${tasks.length} 个任务`);"
      },
      {
        "title": "查找高优先级且待办的任务",
        "code": "const tasks = await Memento.plugins.todo.findTasksByPriority({priority: 'high', status: 'todo'});\nsetResult(`高优先级待办: ${tasks.length} 个任务`);"
      }
    ],
    "notes": "支持额外的状态过滤",
    "enabled": true
  }
}
