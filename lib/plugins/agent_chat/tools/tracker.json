{
  "tracker_getGoals": {
    "title": "获取目标列表",
    "description": "获取目标列表,支持按状态和分组筛选",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "status": {
            "type": "String",
            "optional": true,
            "description": "目标状态: 'active'(进行中) 或 'completed'(已完成),不传则返回所有目标"
          },
          "group": {
            "type": "String",
            "optional": true,
            "description": "分组名称(如 '学习'、'健康'),用于筛选特定分组的目标"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "Goal 对象数组,包含目标的完整信息"
    },
    "examples": [
      {
        "code": "// 获取所有目标\nconst allGoals = await Memento.plugins.tracker.getGoals({});\nsetResult(allGoals);",
        "comment": "获取所有目标"
      },
      {
        "code": "// 获取进行中的目标\nconst activeGoals = await Memento.plugins.tracker.getGoals({ status: 'active' });\nsetResult(activeGoals);",
        "comment": "筛选活跃目标"
      },
      {
        "code": "// 获取'学习'分组的目标\nconst studyGoals = await Memento.plugins.tracker.getGoals({ group: '学习' });\nsetResult(studyGoals);",
        "comment": "按分组筛选"
      },
      {
        "code": "// 获取'健康'分组中已完成的目标\nconst completedHealthGoals = await Memento.plugins.tracker.getGoals({ status: 'completed', group: '健康' });\nsetResult(completedHealthGoals);",
        "comment": "组合筛选"
      }
    ],
    "notes": "返回的 Goal 对象包含: id, name, icon, iconColor, unitType, targetValue, currentValue, dateSettings, reminderTime, isLoopReset, createdAt, group, imagePath, progressColor",
    "enabled": true
  },
  "tracker_getGoal": {
    "title": "获取单个目标",
    "description": "获取单个目标的详细信息",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": false,
            "description": "目标的唯一 ID(时间戳字符串)"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "Goal 对象"
    },
    "examples": [
      {
        "code": "const goal = await Memento.plugins.tracker.getGoal({ goalId: 'goal123' });\nconst result = `目标名称: ${goal.name}, 进度: ${goal.currentValue}/${goal.targetValue}`;\nsetResult(result);",
        "comment": "获取目标信息"
      }
    ],
    "notes": "如果目标不存在,会抛出 ArgumentError: Goal not found: <goalId>",
    "enabled": true
  },
  "tracker_createGoal": {
    "title": "创建目标",
    "description": "创建新的追踪目标",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "name": {
            "type": "String",
            "optional": false,
            "description": "目标名称"
          },
          "unitType": {
            "type": "String",
            "optional": false,
            "description": "单位类型(如 '次'、'分钟'、'页'、'公里')"
          },
          "targetValue": {
            "type": "Number",
            "optional": false,
            "description": "目标值(必须大于 0)"
          },
          "id": {
            "type": "String",
            "optional": true,
            "description": "自定义目标 ID,不传则自动生成时间戳 ID。如果提供的 ID 已存在会返回错误"
          },
          "group": {
            "type": "String",
            "optional": true,
            "description": "分组名称,默认为 '默认'"
          },
          "icon": {
            "type": "String",
            "optional": true,
            "description": "图标代码点(Material Icons),默认为 '57455'"
          },
          "dateType": {
            "type": "String",
            "optional": true,
            "description": "日期类型: 'daily'(每日)、'weekly'(每周)、'monthly'(每月)、'custom'(自定义),默认为 'daily'"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "创建的 Goal 对象,包含 id(自定义或自动生成的) 和 createdAt"
    },
    "examples": [
      {
        "code": "// 创建每日阅读目标(自动生成ID)\nconst goal = await Memento.plugins.tracker.createGoal({\n  name: '每日阅读',\n  unitType: '分钟',\n  targetValue: 30,\n  group: '学习'\n});\nsetResult(goal);",
        "comment": "创建每日目标(自动ID)"
      },
      {
        "code": "// 创建每周运动目标(自定义ID)\nconst weeklyGoal = await Memento.plugins.tracker.createGoal({\n  id: 'goal123',\n  name: '每周运动',\n  unitType: '小时',\n  targetValue: 5,\n  group: '健康',\n  dateType: 'weekly'\n});\nsetResult(weeklyGoal);",
        "comment": "创建每周目标(自定义ID)"
      }
    ],
    "notes": "目标创建后 currentValue 初始为 0,isLoopReset 默认为 true。可选传入自定义 id 参数,如果 id 已存在会返回错误信息: {'error': '目标ID已存在: <id>'}",
    "enabled": true
  },
  "tracker_updateGoal": {
    "title": "更新目标",
    "description": "更新目标的属性信息",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": false,
            "description": "目标 ID"
          },
          "updateJson": {
            "type": "Object",
            "optional": false,
            "description": "更新数据对象,可包含任意可更新字段"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "更新后的 Goal 对象"
    },
    "examples": [
      {
        "code": "// 更新目标名称和目标值\nconst updated = await Memento.plugins.tracker.updateGoal({\n  goalId: 'goal123',\n  updateJson: {\n    name: '每日深度阅读',\n    targetValue: 60\n  }\n});\nsetResult(updated);",
        "comment": "更新基本信息"
      },
      {
        "code": "// 更新提醒时间和分组\nconst updated2 = await Memento.plugins.tracker.updateGoal({\n  goalId: 'goal123',\n  updateJson: {\n    reminderTime: '20:00',\n    group: '个人成长'\n  }\n});\nsetResult(updated2);",
        "comment": "更新提醒设置"
      }
    ],
    "notes": "可更新字段: name, icon, iconColor, unitType, targetValue, currentValue, dateSettings, reminderTime, isLoopReset, group, imagePath, progressColor",
    "enabled": true
  },
  "tracker_deleteGoal": {
    "title": "删除目标",
    "description": "删除目标及其所有关联记录",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": false,
            "description": "目标 ID"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "操作结果对象,成功返回 {success: true, goalId: string},失败返回 {success: false, error: string}"
    },
    "examples": [
      {
        "code": "const result = await Memento.plugins.tracker.deleteGoal({ goalId: 'goal123' });\nif (result.success) {\n  setResult(`成功删除目标: ${result.goalId}`);\n} else {\n  setResult(`删除失败: ${result.error}`);\n}",
        "comment": "删除目标并处理结果"
      }
    ],
    "notes": "删除操作不可逆,会同时删除该目标的所有记录数据。如果goalId不存在或删除过程出错,会返回 {success: false, error: string}",
    "enabled": true
  },
  "tracker_recordData": {
    "title": "添加记录",
    "description": "为目标添加完成记录,自动更新目标进度",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": false,
            "description": "目标 ID"
          },
          "value": {
            "type": "Number",
            "optional": false,
            "description": "记录值(必须为正数)"
          },
          "id": {
            "type": "String",
            "optional": true,
            "description": "自定义记录 ID,不传则自动生成时间戳 ID。如果提供的 ID 已存在会返回错误"
          },
          "note": {
            "type": "String",
            "optional": true,
            "description": "备注信息"
          },
          "dateTime": {
            "type": "String",
            "optional": true,
            "description": "记录时间(ISO 8601 格式),默认为当前时间"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "创建的 Record 对象,包含 id(自定义或自动生成的), goalId, value, note, recordedAt, durationSeconds"
    },
    "examples": [
      {
        "code": "// 添加今日阅读记录(自动生成ID)\nconst record = await Memento.plugins.tracker.recordData({\n  goalId: 'goal123',\n  value: 30,\n  note: '阅读《代码整洁之道》'\n});\nsetResult(record);",
        "comment": "添加当前记录(自动ID)"
      },
      {
        "code": "// 添加昨日的记录\nconst timeInfo = await Memento.system.getCurrentTime();\nconst yesterday = new Date(timeInfo.timestamp);\nyesterday.setDate(yesterday.getDate() - 1);\nconst pastTime = yesterday.toISOString().replace(/T.*/, 'T20:00:00.000Z');\nconst pastRecord = await Memento.plugins.tracker.recordData({\n  goalId: 'goal123',\n  value: 45,\n  note: '昨日补记',\n  dateTime: pastTime\n});\nsetResult(pastRecord);",
        "comment": "补记历史数据(自动ID)"
      },
      {
        "code": "// 使用自定义ID添加记录\nconst customRecord = await Memento.plugins.tracker.recordData({\n  id: 'record123',\n  goalId: 'goal123',\n  value: 25,\n  note: '晨读'\n});\nsetResult(customRecord);",
        "comment": "使用自定义ID"
      }
    ],
    "notes": "记录会自动累加到目标的 currentValue,并触发 onRecordAdded 事件供其他插件监听。可选传入自定义 id 参数,如果 id 已存在会返回错误信息: {'error': '记录ID已存在: <id>'}",
    "enabled": true
  },
  "tracker_getRecords": {
    "title": "获取记录列表",
    "description": "获取目标的记录历史,按时间倒序排列",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": false,
            "description": "目标 ID"
          },
          "limit": {
            "type": "Number",
            "optional": true,
            "description": "返回的最大记录数,不传则返回所有记录"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "Record 对象数组,按时间倒序排列"
    },
    "examples": [
      {
        "code": "// 获取所有记录\nconst allRecords = await Memento.plugins.tracker.getRecords({ goalId: 'goal123' });\nsetResult(allRecords);",
        "comment": "获取全部记录"
      },
      {
        "code": "// 获取最近 10 条记录\nconst recentRecords = await Memento.plugins.tracker.getRecords({ goalId: 'goal123', limit: 10 });\nconst result = recentRecords.map(record => `${record.recordedAt}: ${record.value} ${record.note || ''}`).join('\\n');\nsetResult(result);",
        "comment": "获取最新记录"
      }
    ],
    "notes": "返回的 Record 对象包含: id, goalId, value, note, recordedAt, durationSeconds(可选)",
    "enabled": true
  },
  "tracker_deleteRecord": {
    "title": "删除记录",
    "description": "删除单条记录,自动从目标进度中扣除对应值",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "recordId": {
            "type": "String",
            "optional": false,
            "description": "记录 ID"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "操作结果对象,成功返回 {success: true, recordId: string},失败返回 {success: false, error: string}"
    },
    "examples": [
      {
        "code": "const result = await Memento.plugins.tracker.deleteRecord({ recordId: 'record123' });\nif (result.success) {\n  setResult(`成功删除记录: ${result.recordId}`);\n} else {\n  setResult(`删除失败: ${result.error}`);\n}",
        "comment": "删除记录并处理结果"
      }
    ],
    "notes": "删除记录会自动从目标的 currentValue 中减去对应的 value 值。如果recordId不存在或删除过程出错,会返回 {success: false, error: string}",
    "enabled": true
  },
  "tracker_getProgress": {
    "title": "获取进度信息",
    "description": "获取目标的当前进度详情",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": false,
            "description": "目标 ID"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "进度信息对象,包含 goalId, currentValue, targetValue, progress, percentage, isCompleted"
    },
    "examples": [
      {
        "code": "const progress = await Memento.plugins.tracker.getProgress({ goalId: 'goal123' });\nconst result = `进度: ${progress.percentage}%\\n完成状态: ${progress.isCompleted ? '已完成' : '进行中'}`;\nsetResult(result);",
        "comment": "查询目标进度"
      }
    ],
    "notes": "progress 为小数(0-1),percentage 为百分比字符串,isCompleted 表示是否达到目标值",
    "enabled": true
  },
  "tracker_getStats": {
    "title": "获取统计信息",
    "description": "获取全局或单个目标的统计数据",
    "parameters": [
      {
        "name": "params",
        "type": "Object",
        "optional": false,
        "description": "参数对象",
        "properties": {
          "goalId": {
            "type": "String",
            "optional": true,
            "description": "目标 ID,不传则返回全局统计"
          }
        }
      }
    ],
    "returns": {
      "type": "Object",
      "description": "统计信息对象,全局统计和单目标统计返回格式不同"
    },
    "examples": [
      {
        "code": "// 获取全局统计\nconst stats = await Memento.plugins.tracker.getStats({});\nconst result = `总目标数: ${stats.totalGoals}\\n今日完成: ${stats.todayCompleted}\\n本月完成: ${stats.monthCompleted}\\n整体进度: ${(stats.overallProgress * 100).toFixed(1)}%\\n分组列表: ${stats.groups.join(', ')}`;\nsetResult(result);",
        "comment": "全局统计"
      },
      {
        "code": "// 获取单个目标统计\nconst goalStats = await Memento.plugins.tracker.getStats({ goalId: 'goal123' });\nconst result = `目标名称: ${goalStats.goalName}\\n总记录数: ${goalStats.totalRecords}\\n累计值: ${goalStats.totalValue}`;\nsetResult(result);",
        "comment": "单目标统计"
      }
    ],
    "notes": "全局统计包含: totalGoals, todayCompleted, monthCompleted, monthAdded, todayRecords, overallProgress, groups。单目标统计包含: goalId, goalName, totalRecords, totalValue, currentValue, targetValue, progress, isCompleted",
    "enabled": true
  }
}
