# 脚本输入参数功能使用指南

## 功能位置

输入参数编辑功能位于**脚本编辑对话框**中，但需要满足以下条件才会显示：

### 显示条件

**必须将脚本类型设置为 "Module（可接受参数）"**

### 操作步骤

1. **打开脚本编辑对话框**
   - 点击脚本列表中的某个脚本，或
   - 点击右下角的 "+" 按钮创建新脚本

2. **找到"高级设置"区域**
   - 向下滚动到"高级设置"部分

3. **设置脚本类型**
   - 找到"脚本类型"下拉框
   - 选择 **"Module（可接受参数）"**
   - ⚠️ 如果选择 "Standalone（独立运行）"，输入参数区域将被隐藏

4. **查看输入参数区域**
   - 选择 Module 类型后，下方会自动出现"输入参数"区域
   - 包含以下内容：
     - 📋 参数列表（显示已添加的参数）
     - ➕ "添加输入参数"按钮

5. **添加参数**
   - 点击"添加输入参数"按钮
   - 填写参数信息：
     - 参数名称（必填）
     - 变量名（必填，用于在JS代码中访问）
     - 数据类型（string/number/boolean/select）
     - 是否必填
     - 默认值
     - 提示文本
     - 参数描述

6. **管理参数**
   - ✏️ 点击参数卡片上的"编辑"图标修改参数
   - 🗑️ 点击"删除"图标移除参数

## UI 结构示意

```
┌─────────────────────────────────────┐
│  编辑脚本                            │
├─────────────────────────────────────┤
│                                     │
│  [基本信息]                          │
│  - 脚本名称                          │
│  - 脚本ID                           │
│  - 描述                             │
│                                     │
│  [外观设置]                          │
│  - 图标选择                          │
│                                     │
│  [作者信息]                          │
│  - 作者                             │
│  - 版本号                           │
│                                     │
│  [高级设置] ⬅️ 关键部分              │
│  ┌───────────────────────────┐     │
│  │ 脚本类型: [v]             │     │
│  │  ○ Module（可接受参数）    │ ⬅️ 选择这个  │
│  │  ○ Standalone（独立运行）  │     │
│  └───────────────────────────┘     │
│                                     │
│  🔽 输入参数区域（仅 Module 类型）   │
│  ┌───────────────────────────┐     │
│  │ [输入参数] 📋             │     │
│  │                           │     │
│  │ ┌─────────────────────┐   │     │
│  │ │ 📝 用户名 (username) │   │     │
│  │ │    类型: string      │   │     │
│  │ │    [✏️编辑] [🗑️删除] │   │     │
│  │ └─────────────────────┘   │     │
│  │                           │     │
│  │ ┌─────────────────────┐   │     │
│  │ │ 📝 年龄 (age)        │   │     │
│  │ │    类型: number      │   │     │
│  │ │    [✏️编辑] [🗑️删除] │   │     │
│  │ └─────────────────────┘   │     │
│  │                           │     │
│  │ [➕ 添加输入参数]          │     │
│  └───────────────────────────┘     │
│                                     │
│  - 更新地址                          │
│  - 启用开关                          │
│                                     │
├─────────────────────────────────────┤
│          [取消]  [保存]              │
└─────────────────────────────────────┘
```

## 常见问题

### Q1: 为什么看不到输入参数区域？
**A:** 检查脚本类型是否选择了 "Module（可接受参数）"。只有 Module 类型才支持输入参数。

### Q2: Standalone 类型和 Module 类型有什么区别？
**A:**
- **Standalone**: 独立运行，不接受用户输入，直接执行
- **Module**: 可接受参数，运行时会弹出表单让用户输入参数

### Q3: 如何在脚本中访问用户输入的参数？
**A:** 通过 `args` 对象访问，例如：
```javascript
const username = args.username;  // 访问 "username" 参数
const age = args.age;            // 访问 "age" 参数
```

### Q4: 参数类型有哪些？
**A:** 支持 4 种类型：
- `string` - 文本输入框
- `number` - 数字输入框
- `boolean` - 开关按钮
- `select` - 下拉选择框

## 示例

参考以下示例文件：
- `examples/example_module_script_metadata.json` - 完整的配置示例
- `examples/example_module_script.js` - 如何在脚本中使用参数

## 技术细节

- **文件位置**: `lib/plugins/scripts_center/widgets/script_edit_dialog.dart`
- **条件渲染**: 第337-478行
- **关键代码**: `if (_selectedType == 'module') ...`
